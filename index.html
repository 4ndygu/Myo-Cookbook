<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
        <link href='http://fonts.googleapis.com/css?family=Noto+Serif:400,400italic' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Droid+Serif' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Noto+Sans' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" type="text/css" href="mycss.css">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script src="myojs/build/myojs-0.8.7.js"></script>
        <script>
            var hub = new Myo.Hub();

            hub.on('ready', function() {
                console.log("ready");
            });
            hub.on('connect', function() {
                console.log("connected");
            });
            hub.on('frame', function(frame) {
                // Get the most recent frame and report some basic information
                //console.log("Frame id: " + frame.id + ", timestamp: " + frame.timestamp);
            });
            hub.on('disconnect', function() {
                console.log("disconnect");
            });
        </script>
    </head>
    
    <body>
        <h2 class="text-center" id="header"><a href="index.html">My(o) Cookbook</a></h2>
        
        <nav></nav>
        
        <div id="divider1"></div>
        <div id="divider2"></div>

        
        <section class="maintext">
            <p class="text-info" id="adjust_index">Please enter your recipe.</p>  

            <div id="tasklist">
                <ol type="1" id="steps">
                    <li>
                        <form class="form-inline" id="formitem">
                                <select class="form-control">
                                    <option>Stir</option>
                                    <option>Cut</option>
                                    <option>Heat</option>
                                </select>
                                <div class="form-group">
                                    <label for="itemname">Item</label>
                                    <input type="text" name="itemname">
                                </div>
                                <div class="form-group">
                                    <label for="quant">Quantity</label>
                                    <input type="text" name="quant">
                                </div>
                                <div class="form-group">
                                    <label for="duration">Duration</label>
                                    <input type="text" name="duration">
                                </div>
                        </form>
                        <script>

                        </script>
                    </li>
                </ol>
            </div>

            <button type="button" class="btn btn-primary" onclick="Add_Item()">+</button>
                <script>
                    function Add_Item() {
                        var element = document.getElementById("steps");
                        var tasks = ["Stir", "Cut", "Heat"];

                        //Sets ids for the list item, the form item, then the dropdown
                        var selectList = document.createElement("select");
                        selectList.className = "form-control";
                        var li = document.createElement("li");
                        var formItem = document.createElement("form");
                        formItem.id = "formitem";
                        formItem.className = "form-inline";

                        //Creates name input box
                        var nameDiv = document.createElement("div");
                        nameDiv.className = "form-group";
                        var nameObject = document.createElement("input");
                        nameObject.type = "text";
                        nameObject.name = "itemname";
                        nameDiv.style.marginLeft = "4px";

                        var nameLabel = document.createElement("Label");
                        nameLabel.innerHTML = "Item";
                        nameLabel.htmlFor = "itemname";
                        nameLabel.style.marginRight = "4px";

                        
                        //Creates quantity input box
                        var quantDiv = document.createElement("div");
                        quantDiv.className = "form-group";
                        var quantObject = document.createElement("input");
                        quantObject.type = "text";
                        quantObject.name = "quant";
                        var quantLabel = document.createElement("Label");
                        quantLabel.innerHTML = "Quantity";
                        quantLabel.htmlFor = "quant";
                        quantLabel.style.marginRight = "4px";
                        quantLabel.style.marginLeft = "4px";


                        //Creates time input box
                        var timeDiv = document.createElement("div");
                        timeDiv.className = "form-group";
                        var timeObject = document.createElement("input");
                        timeObject.type = "text";
                        timeObject.name = "duration";
                        var timeLabel = document.createElement("Label");
                        timeLabel.innerHTML = "Duration";
                        timeLabel.htmlFor = "itemname";
                        timeLabel.style.marginRight = "4px";
                        timeLabel.style.marginLeft = "4px";




                        //Pushes everything in
                        element.appendChild(li);
                        li.appendChild(formItem);
                        formItem.appendChild(selectList);

                        formItem.appendChild(nameDiv);
                        nameDiv.appendChild(nameLabel);
                        nameDiv.appendChild(nameObject);

                        formItem.appendChild(quantDiv);
                        quantDiv.appendChild(quantLabel);
                        quantDiv.appendChild(quantObject);

                        formItem.appendChild(timeDiv);
                        timeDiv.appendChild(timeLabel);
                        timeDiv.appendChild(timeObject);

                        //Pushes values into the dropdown
                        for (var i=0; i < tasks.length; i++) {
                            var option = document.createElement("option");
                            option.value = tasks[i];
                            option.text = tasks[i];
                            selectList.appendChild(option);
                        }
                    }
                </script>
            <button type="button" class="btn btn-primary" onclick="Submit()">Submit</button>
                <script>
                    function Submit() {
                        var nums = document.getElementById("steps");
                        var listItem = steps.getElementsByTagName("li");
                        //var formsCollection = steps.getElementsByTagName("form");
                        var formsCollection = document.forms;
                        for(var i=0;i<formsCollection.length;i++)
                        {
                            if (formsCollection[i].elements[0].value == "Heat") 
                            {
                                setTimeout(function(){
                                    hub.myo.vibrate(hub.myo.VIBRATION_LONG);
                                }, 1000 * formsCollection[i].elements[3].value); 
                            }
                            console.log(formsCollection[i].elements[0].value);
                            console.log(formsCollection[i].elements[1].value);
                            console.log(formsCollection[i].elements[2].value);
                        }
                    }
                </script>
        </section>


    <footer>
        <p>&copy; My(o) Cookbook</p>       
    </footer>
    </body>
    

</html>